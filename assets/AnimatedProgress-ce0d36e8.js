import{j as y,c as $,a as I}from"./index.esm-d48b4efe.js";import{_ as j}from"./extends-34e645d9.js";import{r as i}from"./index-8db94870.js";import"./theme-67511692.js";var T=function(e,r,t){return e=e<=t?e:t,e=e>=r?e:r,e},M=function(){var e=!1,r=[],t=function a(){e=!0;var o=r.shift();if(o)return o(a);e=!1},u=function(){e=!1,r=[]},c=function(o){r.push(o),!e&&r.length===1&&t()};return{clear:u,enqueue:c}},O=function(){var e,r=function(){e&&window.cancelAnimationFrame(e)},t=function(c,a){var o,l,q=function x(g){if(l=l||g,o=g-l,o>a){c();return}e=window.requestAnimationFrame(x)};e=window.requestAnimationFrame(q)};return{cancel:r,schedule:t}},Q=function(e){var r=0;return e>=0&&e<.2?r=.1:e>=.2&&e<.5?r=.04:e>=.5&&e<.8?r=.02:e>=.8&&e<.99&&(r=.005),T(e+r,0,.994)},C=function(e){i.useEffect(e,[])},z=function(e){return++e%1e6},H=function(){var e=i.useState(0),r=e[1];return i.useCallback(function(){return r(z)},[])},J=function(e){e===void 0&&(e={});var r=H(),t=i.useRef(j({},e)),u=i.useCallback(function(){return t.current},[]),c=i.useCallback(function(a){a&&(Object.assign(t.current,a),r())},[]);return[u,c]},K=function(){var e=i.useRef(!0);return e.current?(e.current=!1,!0):e.current},N=function(e,r){var t=K();i.useEffect(function(){if(!t)return e()},r)},U=function(){},P={isFinished:!0,progress:0,sideEffect:U},L=function(e){var r=e===void 0?{}:e,t=r.animationDuration,u=t===void 0?200:t,c=r.incrementDuration,a=c===void 0?800:c,o=r.isAnimating,l=o===void 0?!1:o,q=r.minimum,x=q===void 0?.08:q,g=J(P),d=g[0],p=g[1],f=i.useRef(null),v=i.useRef(null);C(function(){f.current=M(),v.current=O()});var b=i.useCallback(function(){var s,m;(s=v.current)==null||s.cancel(),(m=f.current)==null||m.clear()},[]),D=i.useCallback(function(s){var m;if(s=T(s,x,1),s===1){var h,F;b(),(h=f.current)==null||h.enqueue(function(_){p({progress:s,sideEffect:function(){var E;return(E=v.current)==null?void 0:E.schedule(_,u)}})}),(F=f.current)==null||F.enqueue(function(){p({isFinished:!0,sideEffect:b})});return}(m=f.current)==null||m.enqueue(function(_){p({isFinished:!1,progress:s,sideEffect:function(){var E;return(E=v.current)==null?void 0:E.schedule(_,u)}})})},[u,b,x,f,p,v]),w=i.useCallback(function(){D(Q(d().progress))},[d,D]),S=i.useCallback(function(){var s=function m(){var h;w(),(h=f.current)==null||h.enqueue(function(F){var _;(_=v.current)==null||_.schedule(function(){m(),F()},a)})};s()},[a,f,v,w]),V=i.useRef(U),B=d().sideEffect;return i.useEffect(function(){V.current=w}),C(function(){return l&&S(),b}),N(function(){d().sideEffect()},[d,B]),N(function(){l?p(j({},P,{sideEffect:S})):D(1)},[l,D,p,S]),{animationDuration:u,isFinished:d().isFinished,progress:d().progress}};const k=({animationDuration:n,progress:e,variant:r})=>y($,{variant:r,sx:{position:"relative",width:`${e*100}%`,transition:`width ${n}ms linear`,height:"8px"},children:y($,{variant:r,sx:{position:"absolute",width:"100%",height:"2px",top:"3px"}})});try{k.displayName="Bar",k.__docgenInfo={description:"",displayName:"Bar",props:{animationDuration:{defaultValue:null,description:"",name:"animationDuration",required:!0,type:{name:"number"}},progress:{defaultValue:null,description:"",name:"progress",required:!0,type:{name:"number"}},variant:{defaultValue:null,description:"",name:"variant",required:!0,type:{name:"string"}}}}}catch{}const A=({children:n})=>y($,{sx:{position:"relative",height:"8px",width:"100%"},children:n});try{A.displayName="Container",A.__docgenInfo={description:"",displayName:"Container",props:{}}}catch{}const R=({variant:n="perf.green",animationDuration:e=200,incrementDuration:r=800,isAnimating:t=!1,minimum:u=.08})=>{const{animationDuration:c,progress:a}=L({animationDuration:e,incrementDuration:r,isAnimating:t,minimum:u});return I(A,{children:[y(k,{variant:n,animationDuration:c,progress:a}),y(k,{variant:"perf.gray",animationDuration:c,progress:1-a})]})};try{R.displayName="AnimatedProgress",R.__docgenInfo={description:"",displayName:"AnimatedProgress",props:{variant:{defaultValue:{value:"perf.green"},description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"perf.black"'},{value:'"perf.green"'},{value:'"perf.orange"'}]}}}}}catch{}export{R as A};
//# sourceMappingURL=AnimatedProgress-ce0d36e8.js.map
