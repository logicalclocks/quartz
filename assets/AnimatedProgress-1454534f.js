import{j as g,F as $}from"./index.esm-4cde2ecf.js";import{_ as R}from"./extends-98964cd2.js";import{r as i}from"./index-c4905b50.js";import"./theme-a979b46b.js";var V=function(e,r,t){return e=e<=t?e:t,e=e>=r?e:r,e},I=function(){var e=!1,r=[],t=function a(){e=!0;var s=r.shift();if(s)return s(a);e=!1},u=function(){e=!1,r=[]},c=function(s){r.push(s),!e&&r.length===1&&t()};return{clear:u,enqueue:c}},M=function(){var e,r=function(){e&&window.cancelAnimationFrame(e)},t=function(c,a){var s,o,y=function q(h){if(o=o||h,s=h-o,s>a){c();return}e=window.requestAnimationFrame(q)};e=window.requestAnimationFrame(y)};return{cancel:r,schedule:t}},O=function(e){var r=0;return e>=0&&e<.2?r=.1:e>=.2&&e<.5?r=.04:e>=.5&&e<.8?r=.02:e>=.8&&e<.99&&(r=.005),V(e+r,0,.994)},C=function(e){i.useEffect(e,[])},Q=function(e){return++e%1e6},z=function(){var e=i.useState(0),r=e[1];return i.useCallback(function(){return r(Q)},[])},H=function(e){e===void 0&&(e={});var r=z(),t=i.useRef(R({},e)),u=i.useCallback(function(){return t.current},[]),c=i.useCallback(function(a){a&&(Object.assign(t.current,a),r())},[]);return[u,c]},J=function(){var e=i.useRef(!0);return e.current?(e.current=!1,!0):e.current},j=function(e,r){var t=J();i.useEffect(function(){if(!t)return e()},r)},T=function(){},P={isFinished:!0,progress:0,sideEffect:T},K=function(e){var r=e===void 0?{}:e,t=r.animationDuration,u=t===void 0?200:t,c=r.incrementDuration,a=c===void 0?800:c,s=r.isAnimating,o=s===void 0?!1:s,y=r.minimum,q=y===void 0?.08:y,h=H(P),d=h[0],p=h[1],l=i.useRef(null),m=i.useRef(null);C(function(){l.current=I(),m.current=M()});var F=i.useCallback(function(){var f,v;(f=m.current)==null||f.cancel(),(v=l.current)==null||v.clear()},[]),b=i.useCallback(function(f){var v;if(f=V(f,q,1),f===1){var x,D;F(),(x=l.current)==null||x.enqueue(function(_){p({progress:f,sideEffect:function(){var E;return(E=m.current)==null?void 0:E.schedule(_,u)}})}),(D=l.current)==null||D.enqueue(function(){p({isFinished:!0,sideEffect:F})});return}(v=l.current)==null||v.enqueue(function(_){p({isFinished:!1,progress:f,sideEffect:function(){var E;return(E=m.current)==null?void 0:E.schedule(_,u)}})})},[u,F,q,l,p,m]),w=i.useCallback(function(){b(O(d().progress))},[d,b]),S=i.useCallback(function(){var f=function v(){var x;w(),(x=l.current)==null||x.enqueue(function(D){var _;(_=m.current)==null||_.schedule(function(){v(),D()},a)})};f()},[a,l,m,w]),U=i.useRef(T),B=d().sideEffect;return i.useEffect(function(){U.current=w}),C(function(){return o&&S(),F}),j(function(){d().sideEffect()},[d,B]),j(function(){o?p(R({},P,{sideEffect:S})):b(1)},[o,b,p,S]),{animationDuration:u,isFinished:d().isFinished,progress:d().progress}};const k=({animationDuration:n,progress:e,variant:r})=>g.jsx($,{variant:r,sx:{position:"relative",width:`${e*100}%`,transition:`width ${n}ms linear`,height:"8px"},children:g.jsx($,{variant:r,sx:{position:"absolute",width:"100%",height:"2px",top:"3px"}})});try{k.displayName="Bar",k.__docgenInfo={description:"",displayName:"Bar",props:{animationDuration:{defaultValue:null,description:"",name:"animationDuration",required:!0,type:{name:"number"}},progress:{defaultValue:null,description:"",name:"progress",required:!0,type:{name:"number"}},variant:{defaultValue:null,description:"",name:"variant",required:!0,type:{name:"string"}}}}}catch{}const A=({children:n})=>g.jsx($,{sx:{position:"relative",height:"8px",width:"100%"},children:n});try{A.displayName="Container",A.__docgenInfo={description:"",displayName:"Container",props:{}}}catch{}const N=({variant:n="perf.green",animationDuration:e=200,incrementDuration:r=800,isAnimating:t=!1,minimum:u=.08,customProgress:c})=>{const{animationDuration:a,progress:s}=K({animationDuration:e,incrementDuration:r,isAnimating:t,minimum:u}),o=c??s;return g.jsxs(A,{children:[g.jsx(k,{variant:n,animationDuration:a,progress:o}),g.jsx(k,{variant:"perf.gray",animationDuration:a,progress:1-o})]})};try{N.displayName="AnimatedProgress",N.__docgenInfo={description:"",displayName:"AnimatedProgress",props:{variant:{defaultValue:{value:"perf.green"},description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"perf.black"'},{value:'"perf.green"'},{value:'"perf.orange"'}]}},customProgress:{defaultValue:null,description:"",name:"customProgress",required:!1,type:{name:"number"}}}}}catch{}export{N as A};
//# sourceMappingURL=AnimatedProgress-1454534f.js.map
